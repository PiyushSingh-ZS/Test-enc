# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
env: 
  MATRIX: |
    secret : ["ZS_DEVOPS_KEY","PLATFORM_1_KEY"]  
jobs:
  

  job2:
    runs-on: ubuntu-latest
    strategy:
      matrix: 
        secret: ["ZS_DEVOPS_KEY","PLATFORM_1_KEY"] 
    
    steps:
      - name: Setup Env
        run: |
          ORIGINAL_SECRET=${{ matrix.secret }}
          TRANSFORMED_SECRET=$(echo "$ORIGINAL_SECRET" | tr '[:upper:]' '[:lower:]' | sed -e 's/_key$//' -e 's/_/-/g')
          TRANSFORMED_SECRET="$TRANSFORMED_SECRET.json"
          echo "FILE_NAME=$TRANSFORMED_SECRET" >> $GITHUB_ENV
          echo "SECRET_NAME=${{ matrix.secret }}" >> $GITHUB_ENV
      - name: Run a multi-line script
        run: |
          echo "SECRET_NAME=$secret_name" >> $GITHUB_ENV
          echo "SECRET_NAME = $SECRET_NAME"
          echo "SECRET_NAME = ${{ env.SECRET_NAME }}"
          SECRET_VALUE=${{ secrets[env.SECRET_NAME] }}
          echo "SECRET_VALUE = $SECRET_VALUE"
          echo "FILE_NAME = ${{ env.FILE_NAME}}"
          
 
